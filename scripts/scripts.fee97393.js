"use strict";angular.module("jb3App",["ngAnimate","ngResource","ngRoute","ngSanitize","ui.ace","angulartics","angulartics.google.analytics"]).config(["$routeProvider","$locationProvider","$interpolateProvider",function(a,b,c){a.when("/",{templateUrl:"/views/main.html",controller:"MainCtrl"}).when("/courses.html",{templateUrl:"/views/courses.html",controller:"CoursesCtrl"}).when("/about.html",{templateUrl:"/views/about.html",controller:"AboutCtrl"}).when("/:techName.html",{templateUrl:"/views/course.html",controller:"CourseCtrl"}).when("/tutorials/:tutName/:tutTitle.html",{templateUrl:"/views/tutorial.html",controller:"TutorialCtrl"}).when("/tutorials/:tutName/quiz/:tutTitle.html",{templateUrl:"/views/quiz.html",controller:"TutorialCtrl"}).otherwise({redirectTo:"/"}),b.html5Mode(!0),c.startSymbol("{(").endSymbol(")}")}]),angular.module("jb3App").controller("MainCtrl",["$scope",function(){}]),angular.module("jb3App").controller("AboutCtrl",["$scope",function(){}]),angular.module("jb3App").controller("CoursesCtrl",["$scope","$analytics",function(){}]),angular.module("jb3App").controller("CourseCtrl",["$scope","courseDataSvc","$routeParams",function(a,b,c){a.courses=b.getCourses(c.techName)}]),angular.module("jb3App").controller("TutorialCtrl",["$scope","courseDataSvc","$routeParams",function(a,b,c){a.tutName=c.tutName,a.tutTitle=c.tutTitle}]),angular.module("jb3App").directive("globalMenu",function(){return{templateUrl:"/views/directives/global-menu.html",restrict:"E",replace:!0,scope:{open:"="},controller:"GlobalMenuCtrl"}}),angular.module("jb3App").controller("GlobalMenuCtrl",["$scope",function(a){a.openMenu=function(){a.open=!0},a.closeMenu=function(){a.open=!1},a.isMenuOpen=function(){return a.open}}]),angular.module("jb3App").service("courseDataSvc",["$resource",function(a){return{getCourses:function(b){return a("/courses/:tech.json",{tech:"@tech"}).get({tech:b})}}}]);var CommentStripper=function(a){var b="/",c="\\",d="*",e='"',f="'",g="\n",h="\r",i=function(){};return i.prototype={string:"",length:0,position:0,output:null,getCurrentCharacter:function(){return this.string.charAt(this.position)},getPreviousCharacter:function(){return this.string.charAt(this.position-1)},getNextCharacter:function(){return this.string.charAt(this.position+1)},add:function(){this.output.push(this.getCurrentCharacter())},next:function(){this.position++},atEnd:function(){return this.position>=this.length},isEscaping:function(){if(this.getPreviousCharacter()==c){for(var a=this.position-1,b=!1;a>0;){if(this.string.charAt(a--)!=c)return b;b=!b}return b}return!1},processSingleQuotedString:function(){if(this.getCurrentCharacter()==f)for(this.add(),this.next();!this.atEnd();){if(this.getCurrentCharacter()==f&&!this.isEscaping())return;this.add(),this.next()}},processDoubleQuotedString:function(){if(this.getCurrentCharacter()==e)for(this.add(),this.next();!this.atEnd();){if(this.getCurrentCharacter()==e&&!this.isEscaping())return;this.add(),this.next()}},processSingleLineComment:function(){if(this.getCurrentCharacter()==b&&this.getNextCharacter()==b)for(this.next();!this.atEnd();)if(this.next(),this.getCurrentCharacter()==g||this.getCurrentCharacter()==h)return},processMultiLineComment:function(){if(this.getCurrentCharacter()==b&&this.getNextCharacter()==d)for(;!this.atEnd();)if(this.next(),this.getCurrentCharacter()==d&&this.getNextCharacter()==b)return this.next(),void this.next()},process:function(){for(;!this.atEnd();)this.processDoubleQuotedString(),this.processSingleQuotedString(),this.processSingleLineComment(),this.processMultiLineComment(),this.atEnd()||(this.add(),this.next())},reset:function(){this.string="",this.length=0,this.position=0,this.output=[]},strip:function(a){return this.reset(),this.string=a,this.length=this.string.length,this.process(),this.output.join("")}},"function"==typeof define&&define("commentstripper",[],function(){return i}),a.CommentStripper=i}(window);angular.module("jb3App").service("dataService",["$http","$q",function(a,b){function c(b){var c=a({method:"get",url:b,params:{action:"get"}});return c.then(e,d)}function d(a){return b.reject(angular.isObject(a.data)&&a.data.message?a.data.message:"An unknown error occurred.")}function e(a){return a.data}return{getData:c}}]),angular.module("jb3App").service("codeService",function(){this.compareCode=function(a,b){var c=new CommentStripper,d=/\s*([!@#$%^&*()_+\-=\[\]{};:\\|,.<>\/?])\s*/g,e=/^\s+|\r+\n+|\n+|\r+|\s+$/g,f=/ +/g;return a=c.strip(a),a=a.trim(),a=a.replace(e," "),a=a.replace(f," "),a=a.replace(d,"$1"),b=c.strip(b),b=b.trim(),b=b.replace(e," "),b=b.replace(f," "),b=b.replace(d,"$1"),a==b}}),angular.module("jb3App").controller("QuizCtrl",["$scope","$http","$timeout","codeService","dataService",function(a,b,c,d,e){function f(a){e.getData(a).then(function(a){g(a)})}function g(b){a.data=b,a.currentQuestion=a.data.questions[0],a.qIndex=0,a.currentWindow=a.data.questions[0].focus}a.data={questions:[{question:""}]},a.initData=function(b){a.dataFileName=b,f(a.dataFileName)},a.isCurrentWindow=function(b){return a.currentWindow===b},a.setWindow=function(b){a.currentWindow=b},a.isCodingQuestion=function(a){return void 0===a?!1:"code"==a.type},a.isQuestionComplete=function(b){if(b>=a.data.questions.length)return!1;var c=a.data.questions[b].isComplete;return void 0!==c&&c?c:!1},a.getCompletedQuestions=function(){for(var b=[],c=0;c<a.data.qIndex;c++)b.push(a.data.questions[0]);return b},a.getMode=function(a){return a.fileName.endsWith(".java")?"java":a.fileName.endsWith(".xml")?"xml":""},a.checkCodeComplete=function(a){if(!a)return!0;var b=a.codeStarter,c=a.codeAnswer;return d.compareCode(b,c)?!0:void 0},a.aceChanged=function(){if(a.currentQuestion.files){var b=a.currentQuestion.files[a.currentWindow];b&&!b.isCodeComplete&&a.checkCodeComplete(b)&&(b.isCodeComplete=!0,a.checkAllDone(a.currentQuestion))}},a.inputChanged=function(){a.currentQuestion.files||a.currentQuestion.userInput.trim().toLowerCase()===a.currentQuestion.answer&&(a.currentQuestion.isComplete=!0,a.showDialog(),a.moveToNextQuestion())},a.radioClicked=function(b){a.currentQuestion.files||b===a.currentQuestion.answer&&(a.currentQuestion.isComplete=!0,a.showDialog(),a.moveToNextQuestion())},a.checkAllDone=function(b){for(var c=0;c<b.files.length;c++)if(!a.checkCodeComplete(b.files[c]))return;b.isComplete=!0,a.showDialog(),a.moveToNextQuestion()},a.isLastQuestion=function(){return a.qIndex>=a.data.questions.length-1?!0:!1},a.showDialog=function(){a.dialogUp=!0,c(function(){a.dialogUp=!1},1e3)},a.moveToNextQuestion=function(){a.qIndex<a.data.questions.length-1?(a.qIndex++,a.currentQuestion=a.data.questions[a.qIndex],a.currentWindow=a.data.questions[a.qIndex].focus):a.quizComplete=!0},a.moveToQuestion=function(b){b<a.data.questions.length&&(a.qIndex=b,a.currentQuestion=a.data.questions[b],a.currentWindow=a.data.questions[b].focus)},a.range=function(a){return 0>a&&(a=0),new Array(a)}}]),!function(a){var b=window.angulartics||(window.angulartics={});b.waitForVendorCount=0,b.waitForVendorApi=function(a,c,d,e,f){f||b.waitForVendorCount++,e||(e=d,d=void 0),!Object.prototype.hasOwnProperty.call(window,a)||void 0!==d&&void 0===window[a][d]?setTimeout(function(){b.waitForVendorApi(a,c,d,e,!0)},c):(b.waitForVendorCount--,e(window[a]))},a.module("angulartics",[]).provider("$analytics",function(){var c={pageTracking:{autoTrackFirstPage:!0,autoTrackVirtualPages:!0,trackRelativePath:!1,autoBasePath:!1,basePath:""},eventTracking:{},bufferFlushDelay:1e3},d=["pageTrack","eventTrack","setUsername","setUserProperties","setUserPropertiesOnce","setSuperProperties","setSuperPropertiesOnce"],e={},f={},g=function(a){return function(){b.waitForVendorCount&&(e[a]||(e[a]=[]),e[a].push(arguments))}},h=function(b,c){return f[b]||(f[b]=[]),f[b].push(c),function(){var c=arguments;a.forEach(f[b],function(a){a.apply(this,c)},this)}},i={settings:c},j=function(a,b){b?setTimeout(a,b):a()},k={$get:function(){return i},api:i,settings:c,virtualPageviews:function(a){this.settings.pageTracking.autoTrackVirtualPages=a},firstPageview:function(a){this.settings.pageTracking.autoTrackFirstPage=a},withBase:function(b){this.settings.pageTracking.basePath=b?a.element("base").attr("href").slice(0,-1):""},withAutoBase:function(a){this.settings.pageTracking.autoBasePath=a}},l=function(b,d){i[b]=h(b,d);var f=c[b],g=f?f.bufferFlushDelay:null,k=null!==g?g:c.bufferFlushDelay;a.forEach(e[b],function(a,b){j(function(){d.apply(this,a)},b*k)})},m=function(a){return a.replace(/^./,function(a){return a.toUpperCase()})},n=function(a){var b="register"+m(a);k[b]=function(b){l(a,b)},i[a]=h(a,g(a))};return a.forEach(d,n),k}).run(["$rootScope","$location","$window","$analytics","$injector",function(a,b,c,d,e){if(d.settings.pageTracking.autoTrackFirstPage){var f=!0;if(e.has("$route")){var g=e.get("$route");for(var h in g.routes){f=!1;break}}else if(e.has("$state")){var i=e.get("$state");for(var j in i.get()){f=!1;break}}else f=!1;if(f)if(d.settings.pageTracking.autoBasePath&&(d.settings.pageTracking.basePath=c.location.pathname),d.settings.trackRelativePath){var k=d.settings.pageTracking.basePath+b.url();d.pageTrack(k)}else d.pageTrack(b.absUrl())}d.settings.pageTracking.autoTrackVirtualPages&&(d.settings.pageTracking.autoBasePath&&(d.settings.pageTracking.basePath=c.location.pathname+"#"),e.has("$route")&&a.$on("$routeChangeSuccess",function(a,c){if(!c||!(c.$$route||c).redirectTo){var e=d.settings.pageTracking.basePath+b.url();d.pageTrack(e)}}),e.has("$state")&&a.$on("$stateChangeSuccess",function(){var a=d.settings.pageTracking.basePath+b.url();d.pageTrack(a)}))}]).directive("analyticsOn",["$analytics","$timeout",function(b){function c(a){return["a:","button:","button:button","button:submit","input:button","input:submit"].indexOf(a.tagName.toLowerCase()+":"+(a.type||""))>=0}function d(a){return c(a)?"click":"click"}function e(a){return c(a)?a.innerText||a.value:a.id||a.name||a.tagName}function f(a){return"analytics"===a.substr(0,9)&&-1===["On","Event","If","Properties","EventType"].indexOf(a.substr(9))}function g(a){var b=a.slice(9);return"undefined"!=typeof b&&null!==b&&b.length>0?b.substring(0,1).toLowerCase()+b.substring(1):b}return{restrict:"A",scope:!0,link:function(c,h,i){var j=i.analyticsOn||d(h[0]);c.$analytics={},a.forEach(i.$attr,function(a,b){f(b)&&i.$observe(b,function(a){c.$analytics[g(b)]=a})}),a.element(h[0]).bind(j,function(d){var f=i.analyticsEvent||e(h[0]);c.$analytics.eventType=d.type,(!i.analyticsIf||c.$eval(i.analyticsIf))&&(i.analyticsProperties&&a.extend(c.$analytics,c.$eval(i.analyticsProperties)),b.eventTrack(f,c.$analytics))})}}}])}(angular),!function(a){a.module("angulartics.google.analytics",["angulartics"]).config(["$analyticsProvider",function(a){a.settings.trackRelativePath=!0,a.registerPageTrack(function(a){window._gaq&&_gaq.push(["_trackPageview",a]),window.ga&&ga("send","pageview",a)}),a.registerEventTrack(function(a,b){if(b.value){var c=parseInt(b.value,10);b.value=isNaN(c)?0:c}window._gaq?_gaq.push(["_trackEvent",b.category,a,b.label,b.value,b.noninteraction]):window.ga&&(b.noninteraction?ga("send","event",b.category,a,b.label,b.value,{nonInteraction:1}):ga("send","event",b.category,a,b.label,b.value))})}])}(angular);