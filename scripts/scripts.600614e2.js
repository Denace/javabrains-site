"use strict";angular.module("jb3App",["ngAnimate","ngResource","ngRoute","ngSanitize","ui.ace"]).config(["$routeProvider","$locationProvider","$interpolateProvider",function(a,b,c){a.when("/",{templateUrl:"/views/main.html",controller:"MainCtrl"}).when("/courses.html",{templateUrl:"/views/courses.html",controller:"CoursesCtrl"}).when("/about.html",{templateUrl:"/views/about.html",controller:"AboutCtrl"}).when("/:techName.html",{templateUrl:"/views/course.html",controller:"CourseCtrl"}).when("/tutorials/:tutName/:tutTitle.html",{templateUrl:"/views/tutorial.html",controller:"TutorialCtrl"}).when("/tutorials/:tutName/quiz/:tutTitle.html",{templateUrl:"/views/quiz.html",controller:"TutorialCtrl"}).otherwise({redirectTo:"/"}),b.html5Mode(!0),c.startSymbol("{(").endSymbol(")}")}]),angular.module("jb3App").controller("MainCtrl",["$scope",function(){}]),angular.module("jb3App").controller("AboutCtrl",["$scope",function(){}]),angular.module("jb3App").controller("CoursesCtrl",["$scope",function(){}]),angular.module("jb3App").controller("CourseCtrl",["$scope","courseDataSvc","$routeParams",function(a,b,c){a.courses=b.getCourses(c.techName)}]),angular.module("jb3App").controller("TutorialCtrl",["$scope","courseDataSvc","$routeParams",function(a,b,c){a.tutName=c.tutName,a.tutTitle=c.tutTitle}]),angular.module("jb3App").directive("globalMenu",function(){return{templateUrl:"/views/directives/global-menu.html",restrict:"E",replace:!0,scope:{open:"="},controller:"GlobalMenuCtrl"}}),angular.module("jb3App").controller("GlobalMenuCtrl",["$scope",function(a){a.openMenu=function(){a.open=!0},a.closeMenu=function(){a.open=!1},a.isMenuOpen=function(){return a.open}}]),angular.module("jb3App").service("courseDataSvc",["$resource",function(a){return{getCourses:function(b){return a("/courses/:tech.json",{tech:"@tech"}).get({tech:b})}}}]);var CommentStripper=function(a){var b="/",c="\\",d="*",e='"',f="'",g="\n",h="\r",i=function(){};return i.prototype={string:"",length:0,position:0,output:null,getCurrentCharacter:function(){return this.string.charAt(this.position)},getPreviousCharacter:function(){return this.string.charAt(this.position-1)},getNextCharacter:function(){return this.string.charAt(this.position+1)},add:function(){this.output.push(this.getCurrentCharacter())},next:function(){this.position++},atEnd:function(){return this.position>=this.length},isEscaping:function(){if(this.getPreviousCharacter()==c){for(var a=this.position-1,b=!1;a>0;){if(this.string.charAt(a--)!=c)return b;b=!b}return b}return!1},processSingleQuotedString:function(){if(this.getCurrentCharacter()==f)for(this.add(),this.next();!this.atEnd();){if(this.getCurrentCharacter()==f&&!this.isEscaping())return;this.add(),this.next()}},processDoubleQuotedString:function(){if(this.getCurrentCharacter()==e)for(this.add(),this.next();!this.atEnd();){if(this.getCurrentCharacter()==e&&!this.isEscaping())return;this.add(),this.next()}},processSingleLineComment:function(){if(this.getCurrentCharacter()==b&&this.getNextCharacter()==b)for(this.next();!this.atEnd();)if(this.next(),this.getCurrentCharacter()==g||this.getCurrentCharacter()==h)return},processMultiLineComment:function(){if(this.getCurrentCharacter()==b&&this.getNextCharacter()==d)for(;!this.atEnd();)if(this.next(),this.getCurrentCharacter()==d&&this.getNextCharacter()==b)return this.next(),void this.next()},process:function(){for(;!this.atEnd();)this.processDoubleQuotedString(),this.processSingleQuotedString(),this.processSingleLineComment(),this.processMultiLineComment(),this.atEnd()||(this.add(),this.next())},reset:function(){this.string="",this.length=0,this.position=0,this.output=[]},strip:function(a){return this.reset(),this.string=a,this.length=this.string.length,this.process(),this.output.join("")}},"function"==typeof define&&define("commentstripper",[],function(){return i}),a.CommentStripper=i}(window);angular.module("jb3App").service("dataService",["$http","$q",function(a,b){function c(b){var c=a({method:"get",url:b,params:{action:"get"}});return c.then(e,d)}function d(a){return b.reject(angular.isObject(a.data)&&a.data.message?a.data.message:"An unknown error occurred.")}function e(a){return a.data}return{getData:c}}]),angular.module("jb3App").service("codeService",function(){this.compareCode=function(a,b){var c=new CommentStripper,d=/\s*([!@#$%^&*()_+\-=\[\]{};:\\|,.<>\/?])\s*/g,e=/^\s+|\r+\n+|\n+|\r+|\s+$/g,f=/ +/g;return a=c.strip(a),a=a.trim(),a=a.replace(e," "),a=a.replace(f," "),a=a.replace(d,"$1"),b=c.strip(b),b=b.trim(),b=b.replace(e," "),b=b.replace(f," "),b=b.replace(d,"$1"),a==b}}),angular.module("jb3App").controller("QuizCtrl",["$scope","$http","$timeout","codeService","dataService",function(a,b,c,d,e){function f(a){e.getData(a).then(function(a){g(a)})}function g(b){a.data=b,a.currentQuestion=a.data.questions[0],a.qIndex=0,a.currentWindow=a.data.questions[0].focus}a.data={questions:[{question:""}]},a.initData=function(b){a.dataFileName=b,f(a.dataFileName)},a.isCurrentWindow=function(b){return a.currentWindow===b},a.setWindow=function(b){a.currentWindow=b},a.isCodingQuestion=function(a){return void 0===a?!1:"code"==a.type},a.isQuestionComplete=function(b){if(b>=a.data.questions.length)return!1;var c=a.data.questions[b].isComplete;return void 0!==c&&c?c:!1},a.getCompletedQuestions=function(){for(var b=[],c=0;c<a.data.qIndex;c++)b.push(a.data.questions[0]);return b},a.getMode=function(a){return a.fileName.endsWith(".java")?"java":a.fileName.endsWith(".xml")?"xml":""},a.checkCodeComplete=function(a){if(!a)return!0;var b=a.codeStarter,c=a.codeAnswer;return d.compareCode(b,c)?!0:void 0},a.aceChanged=function(){if(a.currentQuestion.files){var b=a.currentQuestion.files[a.currentWindow];b&&!b.isCodeComplete&&a.checkCodeComplete(b)&&(b.isCodeComplete=!0,a.checkAllDone(a.currentQuestion))}},a.inputChanged=function(){a.currentQuestion.files||a.currentQuestion.userInput.trim().toLowerCase()===a.currentQuestion.answer&&(a.currentQuestion.isComplete=!0,a.showDialog(),a.moveToNextQuestion())},a.radioClicked=function(b){a.currentQuestion.files||b===a.currentQuestion.answer&&(a.currentQuestion.isComplete=!0,a.showDialog(),a.moveToNextQuestion())},a.checkAllDone=function(b){for(var c=0;c<b.files.length;c++)if(!a.checkCodeComplete(b.files[c]))return;b.isComplete=!0,a.showDialog(),a.moveToNextQuestion()},a.isLastQuestion=function(){return a.qIndex>=a.data.questions.length-1?!0:!1},a.showDialog=function(){a.dialogUp=!0,c(function(){a.dialogUp=!1},1e3)},a.moveToNextQuestion=function(){a.qIndex<a.data.questions.length-1?(a.qIndex++,a.currentQuestion=a.data.questions[a.qIndex],a.currentWindow=a.data.questions[a.qIndex].focus):a.quizComplete=!0},a.moveToQuestion=function(b){b<a.data.questions.length&&(a.qIndex=b,a.currentQuestion=a.data.questions[b],a.currentWindow=a.data.questions[b].focus)},a.range=function(a){return 0>a&&(a=0),new Array(a)}}]);